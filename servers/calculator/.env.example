# Environment Configuration for RBAC-Protected Calculator MCP Server
# Copy this to .env and update with your Azure AD values

# Required Azure AD Configuration
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here

# MCP Server Configuration  
MCP_SERVER_URL=https://your-server.com:8000
MCP_HOST=0.0.0.0
MCP_PORT=8000
MCP_TRANSPORT=streamable-http

# Authentication Configuration
REQUIRED_SCOPES=MCP.User,MCP.Admin
ENABLE_AUTH=true

# RBAC Configuration (Optional - uses defaults if not specified)
# Custom tool permissions format: tool1:role1,role2;tool2:role3
# Example: TOOL_PERMISSIONS=add:MCP.BasicUser;multiply:MCP.PowerUser;calculate_expression:MCP.Admin
TOOL_PERMISSIONS=

# Optional: Logging Configuration
LOG_LEVEL=INFO

# Azure AD App Registration Setup Guide:
# 1. Server App Registration:
#    - Create app registration for the MCP server
#    - Define app roles: MCP.BasicUser, MCP.PowerUser, MCP.Admin
#    - Set AZURE_CLIENT_ID to this app's Application (client) ID
#    - Set AZURE_TENANT_ID to your tenant ID
#
# 2. Client App Registration:
#    - Create separate app registration for the MCP client
#    - Add API permissions pointing to server app registration
#    - Request app roles (not delegated permissions)
#    - Grant admin consent for the tenant
#
# 3. Token Request:
#    - Use scope: api://[server-app-client-id]/.default
#    - Token will contain 'roles' claim with assigned app roles
#    - Example roles: ["MCP.PowerUser", "MCP.BasicUser"]
#
# 4. Role Mappings (Default):
#    - MCP.BasicUser: add, subtract
#    - MCP.PowerUser: add, subtract, multiply, divide (inherits BasicUser)
#    - MCP.Admin: all operations including calculate_expression (inherits all)
